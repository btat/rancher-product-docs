= 使用 {rancher-product-name} 启动 Kubernetes
:revdate: 2025-08-25
:page-revdate: {revdate}

Rancher allows you to launch a Kubernetes cluster on different types of nodes, including bare-metal servers, on-premise virtual machines, and virtual machines from an infrastructure provider. When deploying Kubernetes to these nodes, Rancher gives you the option to use https://documentation.suse.com/cloudnative/rke2[RKE2] or https://documentation.suse.com/cloudnative/k3s[K3s].

Rancher can install Kubernetes on existing nodes, or it can dynamically provision nodes in an infrastructure provider and install Kubernetes on them.

Rancher can also create pools of machines. One benefit of installing Kubernetes on machine pools hosted by an infrastructure provider is that if a node loses connectivity with the cluster, Rancher can automatically create another node to join the cluster to ensure that the count of the machine pool is as expected.

== {rke2-product-name}

Rancher 2.6 支持直接使用 Rancher UI 配置 https://documentation.suse.com/cloudnative/rke2/latest/zh/introduction.html[RKE2] 集群。RKE2，也称为 RKE Government，是一个完全符合标准的 Kubernetes 发行版，它专注于安全性和合规性。在 Rancher 2.6.4 及更早版本中，RKE2 配置还处于技术预览阶段。

在 Rancher 2.6.5 中，RKE2 已经 GA。

=== 要求

如果你使用 RKE2 建立集群，节点必须满足下游集群的link:https://documentation.suse.com/cloudnative/rke2/latest/zh/install/requirements.html[节点要求]。

=== 在云厂商的新节点上启动 Kubernetes

RKE2 基于使用上游link:https://github.com/kubernetes-sigs/cluster-api[集群 API] 项目的新配置框架。这个新配置框架支持：

* 将 RKE2 集群配置到 Rancher 具有主机驱动的任何提供商上。
* 完全在 Rancher 中配置 RKE2 集群。
* 除了 Canal 之外，还可以选择 CNI 选项， Calico、Cilium 和 Multus。

When you make changes to your cluster configuration in RKE2, this may result in nodes reprovisioning. This is controlled by CAPI controllers and not by Rancher itself. Note that for etcd nodes, the same behavior does not apply.

An example configuration change that may cause the described behavior is when editing a cluster and enabling drain before delete. In this scenario, the existing control plane nodes and worker are deleted and new nodes are created.

RKE2 配置还包括在具有 Windows 节点的集群上安装 RKE2。

RKE2 的 Windows 功能包括：

* Windows 支持 vSphere 主机驱动
* 用于 Windows RKE2 自定义集群的 Calico CNI
* Calico 的项目网络隔离 (PNI)
* 由 containerd 提供支持的使用 RKE2 的 Windows 容器
* 通过 Terraform 配置 Windows RKE2 集群
* 直接从 Rancher UI 配置 Windows RKE2 自定义集群

要使 Windows 支持 RKE2 自定义集群，请选择 Calico 作为 CNI。

=== 在现有自定义节点上启动 Kubernetes

RKE2 还支持在预配置的虚拟机或裸机节点上安装自定义集群。

如果要重复使用之前的自定义集群中的节点，请在复用之前清理节点。如果你重复使用尚未清理的节点，则集群配置可能会失败。

=== 以编程方式创建 {rke2-product-name} 集群

通过 Rancher 以编程方式部署 RKE2 集群的最常见方法是使用 https://registry.terraform.io/providers/rancher/rancher2/latest/docs/resources/cluster_v2[Rancher 2 Terraform Provider]。
