= SUSE Customer Center Registration
:revdate: 2025-08-27
:page-revdate: {revdate}

Since Rancher v2.12.1, SUSE Rancher Prime customers can now register Rancher Manager with https://scc.suse.com/home[SUSE Customer Center (SCC)]. This registration helps you track the use of your organization's subscriptions and deployed Rancher Manager instances.

== Prequsities

* Registering your Rancher Manager instance with SCC requires a SUSE account. If you don't have a SUSE account yet, https://www.suse.com/account/create/[create one].

* You must have access to your organization. Ask your organization's administrator to add you to the account. See the https://scc.suse.com/docs/userguide#UG-Requesting-Access-to-an-Organizations-Account[SCC documentation] and https://scc.suse.com/docs/help#how-to-add-user[SCC FAQ] for details. If you know your organization's registration code, enter it when prompted.

== Register with SUSE Customer Center

From the Rancher UI, go to *Global Settings* > *Registration*. You can also check the Notification Center (bell icon) in the upper-right corner for a "Rancher Prime Registration" notification and click *Register Now*. This redirects you to the *Registration* page under *Global Settings*.

You have the option to register your Rancher Manager instance with SCC <<Online Registration,online>> or <<Offline Registration,offline>>.

=== Online Registration

You can register online through the Rancher UI or with Helm.

Before proceeding, you must have the registration code for your Rancher Manager subscription on SCC. To get the registration code:
. Log in to SCC.
. Navigate to **My Organizations** and click on the organization with your Rancher Manager subscription.
. Find your Registration code under *Organization* > *Subscriptions* > *Subscription Information*.

==== Rancher UI

. From the Rancher UI, copy the registration code into the *Registration code* field and click *Register*. If successful, the *Status* becomes *Active*, and the *Product Name*, *Expiration date* and *Registration mode* are displayed.
+
image::online-scc-registration.png[]

==== Helm

After you have your registration code, you can register your Rancher Manager instance through Helm by passing the argument `--set registration.enabled=true --set registration.regCode=<REGISTRATION-CODE-FROM_SCC>` in the Helm install command `helm install rancher rancher-prime/rancher`.

You can also update `values.yaml`,  enabling registration and adding your registration code.

[,yaml]
----
registration:
  enabled: true
  regCode: ""
----

=== Offline Registration

If you are using Rancher in an air-gapped environment, you can register offline through the Rancher UI or with Helm.

==== Rancher UI

[IMPORTANT]
====
An SCC Organization Admin must get your registration certificate, as regular users do not have access.
====

. From the Rancher UI, click *Download registration request* to download the registration request file.
. Click *Visit SCC* to use the SCC offline registration tool and get the registration certificate. 
.. Upload the registration request file.
.. Select your *Organization* and *Subscription*.
.. Click *Download Offline Certificate* and save the registration certificate file.
. Return to the Rancher UI, click *Upload certificate and register* to upload the registration certificate. If successful, the *Status* becomes *Active*, and the *Product Name*, *Expiration date* and *Registration mode* are displayed.
+
image::offline-scc-registration.png[]

==== Helm

. In `values.yaml`, enable registration, comment out `regCode` and set the `mode` to `offline`.
+
[,yaml]
----
registration:
  enabled: true
  # regCode: ""
  mode: offline
----

. Run the Helm install command `helm install rancher rancher-prime/rancher` and verify installation is successful. 
. Before proceeding, use the following Bash command to check that the SCC-Operator has successfully created a secret in the `cattle-scc-system` namespace. After the secret is created, it outputs  `Secret created!`.
+
[,bash]
----
for i in {1..100}; do kubectl wait --for=create secret/scc-registration -n cattle-scc-system --timeout=3s &> /dev/null && echo "Secret created!" && break || { echo "Not ready yet..."; sleep 3; }; done
----

. Using `kubectl`, retrieve the registration request file and save it locally.
+
[,bash]
----
kubectl get secrets -n  cattle-scc-system \
-l scc.cattle.io/secret-role=offline-request,scc.cattle.io/scc-hash=$(kubectl get secrets \
-n cattle-scc-system scc-registration -o yaml|yq '.metadata.labels["scc.cattle.io/scc-hash"]') \
-o yaml | yq '.items[0].data.request' > offline.base64
----
+
. Click *Visit SCC* to use the SCC offline registration tool. 
.. Upload the registration request file.
.. Select your *Organization* and *Subscription*.
.. Click *Download Offline Certificate* and save the registration certificate file.
. Upload the registration certificate file to your Rancher Manager instance using `kubectl` or Helm.

* *`kubectl`:*
+
[,bash]
----
kubectl patch secret -n cattle-scc-system scc-registration  \
--type='merge' -p "{\"data\": {\"certificate\": \"$(cat <your Offline Cert file> )\"}}"
----
* *Helm:*
+
Add your registration certificate using the `certificate` value field, and then `helm upgrade` Rancher.
+
[,yaml]
----
certificate: {}
----

== Deregister from SUSE Customer Center

If you need to remove or update your registration, you can deregister your Rancher Manager instance from SCC. 

. Go to *Global Settings* > *Registration*.
. Find your Product Registration under *Online Registration* or *Offline Registration* and click *Deregister*.
